"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{6426:function(e,t,n){n.d(t,{Nq:function(){return l},rg:function(){return a}});var o=n(7294);let r=(0,o.createContext)(null);function a({clientId:e,nonce:t,onScriptLoadSuccess:n,onScriptLoadError:a,children:l}){let u=function(e={}){let{nonce:t,onScriptLoadSuccess:n,onScriptLoadError:r}=e,[a,l]=(0,o.useState)(!1),u=(0,o.useRef)(n);u.current=n;let i=(0,o.useRef)(r);return i.current=r,(0,o.useEffect)(()=>{let e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;l(!0),null===(e=u.current)||void 0===e||e.call(u)},e.onerror=()=>{var e;l(!1),null===(e=i.current)||void 0===e||e.call(i)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),a}({nonce:t,onScriptLoadSuccess:n,onScriptLoadError:a}),i=(0,o.useMemo)(()=>({clientId:e,scriptLoadedSuccessfully:u}),[e,u]);return o.createElement(r.Provider,{value:i},l)}function l({flow:e="implicit",scope:t="",onSuccess:n,onError:a,onNonOAuthError:l,overrideScope:u,state:i,...c}){let{clientId:s,scriptLoadedSuccessfully:d}=function(){let e=(0,o.useContext)(r);if(!e)throw Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),p=(0,o.useRef)(),A=(0,o.useRef)(n);A.current=n;let g=(0,o.useRef)(a);g.current=a;let h=(0,o.useRef)(l);h.current=l,(0,o.useEffect)(()=>{var n;if(!d)return;let o="implicit"===e?"initTokenClient":"initCodeClient",r=null===(n=null==window?void 0:window.google)||void 0===n?void 0:n.accounts.oauth2[o]({client_id:s,scope:u?t:`openid profile email ${t}`,callback:e=>{var t,n;if(e.error)return null===(t=g.current)||void 0===t?void 0:t.call(g,e);null===(n=A.current)||void 0===n||n.call(A,e)},error_callback:e=>{var t;null===(t=h.current)||void 0===t||t.call(h,e)},state:i,...c});p.current=r},[s,d,e,t,i]);let v=(0,o.useCallback)(e=>{var t;return null===(t=p.current)||void 0===t?void 0:t.requestAccessToken(e)},[]),f=(0,o.useCallback)(()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.requestCode()},[]);return"implicit"===e?v:f}},3706:function(e,t){t.Z={src:"/_next/static/media/auth.9f916b1e.png",height:1031,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAICAYAAADaxo44AAAAdUlEQVR42mPg4+FjFOATUBDkFxRjQAdACRmghC0QJ8IFgRxJQQFBaSC9DIifA7E4TMKQn5efB0ivBOI3QCwJk5AAYk0g3g/E+4DGisAkpID4CBB/AOIZQOwNxHDJIiB+DMQzgdgFiG2RHSEExFVA7CrIL8gFAJR4E2NmazUWAAAAAElFTkSuQmCC",blurWidth:6,blurHeight:8}},7006:function(e,t){t.Z={src:"/_next/static/media/loginbtn.c6e4fa8c.png",height:46,width:191,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASUlEQVR4nGP8/v79tYdvWKUm7GH6zc70n4GJkQGMmZkYWN9++/+M8f2HdzcevWKTmr+f8Tcr83/Gv/8ZGIDy/3k5GFlffPr3DAC3DhyL284VZQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:2}},6523:function(e,t,n){var o=n(5893);t.Z=e=>{let{value:t,onClick:n}=e;return(0,o.jsx)("button",{className:"bg-gray-900 w-full text-white py-2 text-lg font-semibold rounded",onClick:n,children:t})}},7421:function(e,t,n){var o=n(8311);t.Z=e=>t=>{t({type:o.Q,payload:e})}},7868:function(e,t,n){n.d(t,{Z:function(){return r}});let o="ALERT_TYPE";var r=e=>t=>{t({type:o,payload:e||""}),setTimeout(()=>{t({type:o,payload:""})})}},6462:function(e,t,n){n.d(t,{DZ:function(){return h},X8:function(){return p},kS:function(){return v},lg:function(){return A},n$:function(){return d},z2:function(){return s}});var o=n(1202),r=n(3414),a=n(5634),l=n(9542),u=n(7199),i=n(7868),c=n(7421);let s=(e,t)=>n=>{n((0,c.Z)(!1)),u.Z.post("/user/register",e).then(e=>{n((0,c.Z)(!0)),(0,l.Z)(e.data.token),localStorage.setItem("token",e.data.token),t.push("/")}).catch(e=>{var t;n({type:r.Hl,payload:{error:e.response.data}}),n((0,c.Z)(!0)),n((0,i.Z)(null===(t=e.response)||void 0===t?void 0:t.data.message))})},d=(e,t)=>n=>{n((0,c.Z)(!1)),u.Z.post("/user/login",e).then(e=>{n((0,c.Z)(!0)),(0,l.Z)(e.data.token),localStorage.setItem("token",e.data.token),t.push("/")}).catch(e=>{var t,o;n({type:r._C,payload:{error:null===(t=e.response)||void 0===t?void 0:t.data}}),n((0,c.Z)(!0)),n((0,i.Z)(null===(o=e.response)||void 0===o?void 0:o.data.message))})},p=(e,t)=>n=>{n((0,c.Z)(!1)),fetch("https://www.googleapis.com/oauth2/v2/userinfo",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{u.Z.post("/user/registergoogle",e).then(e=>{(0,l.Z)(e.data.token),localStorage.setItem("token",e.data.token),t.push("/"),n((0,c.Z)(!0))}).catch(e=>{var t,o;n({type:r.VZ,payload:{error:null===(t=e.response)||void 0===t?void 0:t.data}}),n((0,c.Z)(!0)),n((0,i.Z)(null===(o=e.response)||void 0===o?void 0:o.data.message))})}).catch(()=>{n((0,i.Z)("Login failed! Try again"))})},A=()=>e=>{let t=localStorage.getItem("token");if(t){var n=(0,o.o)(t),a=new Date;1e3*n.exp<a.getTime()?(e({type:r.MQ,payload:{isAuthenticate:!1}}),localStorage.removeItem("token")):(e({type:r.MQ,payload:{isAuthenticate:!0}}),e(g()))}else e({type:r.MQ,payload:{isAuthenticate:!1}}),(0,l.Z)("")},g=()=>e=>{u.Z.get("/user/getmyaccount").then(t=>{e({type:r._U,payload:t.data})}).catch(t=>{var n;e({type:r._U,payload:null===(n=t.response)||void 0===n?void 0:n.data})})},h=(e,t)=>n=>{n((0,c.Z)(!1)),n((0,i.Z)("")),u.Z.put("/user/updateuser",e).then(e=>{n({type:r.cB,payload:e.data.response}),n((0,i.Z)(e.data.message)),n((0,c.Z)(!0)),t.push("/")}).catch(e=>{var t;n((0,i.Z)(null===(t=e.response)||void 0===t?void 0:t.data.message)),n((0,c.Z)(!0))})},v=e=>t=>{t({type:r.Wb,payload:{isAuthenticate:!1}}),t({type:a.h}),localStorage.removeItem("token"),(0,l.Z)(""),e.push("/login")}}}]);